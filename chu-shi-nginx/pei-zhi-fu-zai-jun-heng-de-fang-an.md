# 配置负载均衡的方案

应用服务器上处理业务逻辑 , 由于应用服务器地位上的重要性 , 为了确保应用服务器的高可用 , 可以使用Nginx负载均衡和健康检查特性 , 一个初级的方案 :

上面的方案中 , 负载均衡服务器部署了Nginx , 其绑定了两个IP , 外网的IP和内网的IP . 用NDS服务把域名绑定到外网IP , 通过内网IP和应用服务集群的服务器通信 .

应用集群内的机器不能直接访问网络 , 所以数据的进出都要经过负载均衡服务器 .

* 保证应用服务的高可用 , 防宕机
* 应用服务器不直接连接Internet , 减少了被入侵的可能性

一般情况下这种方案初期使用 . 但有个问题是 , 只有一台负载均衡服务器 , 这台机器宕机的话 , 整个应用就不能用了 .

目前普遍的方式是在Nginx前再加一层Keepalived . 部署两台Nginx服务器 , 通过Keepalived把外网IP绑定到一台Nginx服务器上 , 如果其宕机 , Keepalived就把这个IP漂移到另外一台Nginx服务器上 , 使服务不受影响 .

